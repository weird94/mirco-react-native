"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),n=t(e),r=require("react-native"),o=t(require("react-navigation"));function i(t){if("REACT"==t)return n;if("REACT_NATIVE"==t)return r;if("REACT_NAVIGATION"==t)return o;throw"require unsupported external module: "+t}function u(t,e){return void 0===e&&(e=fetch),e(t).then((function(t){return t.text()})).then((function(t){var e={};return new Function("exports","require",t)(e,i),e.__esModule?e.default:e}))}var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},s=function(){};function p(t){var r=t.Loading,o=t.ErrorTips,i=t.trackRenderError,p=void 0===i?s:i,f=t.injectFetch;if(!r)throw"invailed options, prop `Loading` is required";if(!o)throw"invailed options, prop `ErrorTips` is required";return(function(t){function i(e){var n=t.call(this,e)||this;return n.handleRetry=function(){n.setState({error:!1})},n.handleRefresh=function(){n.buildComponent(),n.setState({refreshTag:Date.now()})},n.getStackDepth=function(){var t,e=null===(t=n.props.navigation.dangerouslyGetParent())||void 0===t?void 0:t.state;return e&&e.routes?e.routes.length:1},n.state={error:!1,refreshTag:0},n.focusEvent=null,n.buildComponent(),n}return function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(i,t),i.prototype.buildComponent=function(){var t=this.props.navigation.getParam("url");n.lazy((function(){return u(t,f||fetch)}))},i.prototype.addFocusEvent=function(){var t=this.props.navigation;this.focusEvent=t.addListener("didFocus",this.handleFocus)},i.prototype.removeFocusEvent=function(){this.focusEvent&&(this.focusEvent.remove(),this.focusEvent=null)},i.prototype.handleFocus=function(){var t=this.props.onBackToTop;1===this.getStackDepth()&&"function"==typeof t&&t()},i.prototype.componentDidCatch=function(t){p(t),this.setState({error:!0})},i.prototype.componentDidMount=function(){this.addFocusEvent()},i.prototype.componentWillUnmount=function(){this.removeFocusEvent()},i.prototype.render=function(){var t=this.RemoteComponent,i=this.state,u=i.error,a=i.refreshTag;return u?n.createElement(o,{onRetry:this.handleRetry}):n.createElement(e.Suspense,{key:a,fallback:n.createElement(r,null)},n.createElement(t,c({},this.props)))},i}(n.Component))}var f=p({Loading:function(){return n.createElement(r.View,null)},ErrorTips:function(){return n.createElement(r.View,null)},trackRenderError:console.warn}),l=Symbol("symbol for dynamic-rn-container");exports.CONTAINER=l,exports.RemoteComponentContainer=f,exports.createContainer=p,exports.loadRemoteComponent=u;
